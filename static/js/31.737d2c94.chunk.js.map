{"version":3,"sources":["components/ActionsPanel.js","components/Actions.js","../node_modules/fast-deep-equal/index.js"],"names":["Timeline","lazy","retry","ActionsPanel","lastUpdatedDate","isTimelineMode","newUpdate","setIsTimelineMode","date","showUpdates","setDate","dates","t","setNewUpdate","setShowUpdates","useTranslation","trail","useMemo","styles","map","element","index","push","animationDelay","className","style","opacity","transform","pointerEvents","formatDate","fallback","Updates","Actions","useState","useLocalStorage","lastViewedLog","setLastViewedLog","updates","useSWR","API_DOMAIN","fetcher","refreshInterval","API_REFRESH_INTERVAL","data","useEffect","undefined","lastTimestamp","slice","reverse","timestamp","maxLastUpdatedDate","formatDateObjIndia","max","filter","parseIndiaDate","isEqual","prevProps","currProps","equal","memo","module","exports","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key"],"mappings":"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","file":"static/js/31.737d2c94.chunk.js","sourcesContent":["// import Tooltip from './Tooltip';\r\n\r\nimport {formatDate, retry} from '../utils/commonFunctions';\r\n\r\n// import {BellIcon, BellSlashIcon, HistoryIcon} from '@primer/octicons-react';\r\n// import {BellIcon, BellSlashIcon} from '@primer/octicons-react';\r\n// import {useMemo, useCallback, lazy, Suspense} from 'react';\r\nimport {useMemo, lazy, Suspense} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nconst Timeline = lazy(() => retry(() => import('./Timeline')));\r\n\r\nconst ActionsPanel = ({\r\n  lastUpdatedDate,\r\n  newUpdate,\r\n  isTimelineMode,\r\n  setIsTimelineMode,\r\n  showUpdates,\r\n  date,\r\n  setDate,\r\n  dates,\r\n  setNewUpdate,\r\n  setShowUpdates,\r\n}) => {\r\n  const {t} = useTranslation();\r\n\r\n  const trail = useMemo(() => {\r\n    const styles = [];\r\n\r\n    [0, 0, 0].map((element, index) => {\r\n      styles.push({\r\n        animationDelay: `${500 + index * 250}ms`,\r\n      });\r\n      return null;\r\n    });\r\n    return styles;\r\n  }, []);\r\n\r\n  // const handleTimelineClick = useCallback(() => {\r\n  //   setIsTimelineMode(true);\r\n  //   if (showUpdates) setShowUpdates(!showUpdates);\r\n  // }, [setIsTimelineMode, setShowUpdates, showUpdates]);\r\n\r\n  // const handleBellClick = useCallback(() => {\r\n  //   if (!showUpdates) setNewUpdate(false);\r\n  //   setShowUpdates(!showUpdates);\r\n  // }, [showUpdates, setShowUpdates, setNewUpdate]);\r\n\r\n  return (\r\n    <div className=\"ActionsPanel\">\r\n      <div\r\n        className=\"actions\"\r\n        style={{\r\n          opacity: isTimelineMode ? 0 : 1,\r\n          transform: `perspective(600px) rotateX(${\r\n            isTimelineMode ? 90 : 0\r\n          }deg)`,\r\n          pointerEvents: isTimelineMode ? 'none' : '',\r\n        }}\r\n      >\r\n        <h5 className=\"fadeInUp\" style={trail[0]}>{`${formatDate(\r\n          lastUpdatedDate,\r\n          'dd MMM, p'\r\n        )} ${t('IST')}`}</h5>\r\n\r\n        {/* <div\r\n          className=\"bell-icon fadeInUp\"\r\n          style={trail[1]}\r\n          onClick={handleBellClick}\r\n        >\r\n          {!showUpdates ? <BellIcon size={15} /> : <BellSlashIcon size={15} />}\r\n          {newUpdate && <div className=\"indicator\"></div>}\r\n        </div> */}\r\n\r\n        {/* <Tooltip message={'Timeline'} hold>\r\n          <div\r\n            className=\"timeline-icon fadeInUp\"\r\n            onClick={handleTimelineClick}\r\n            style={trail[2]}\r\n          >\r\n            {<HistoryIcon />}\r\n          </div>\r\n        </Tooltip> */}\r\n      </div>\r\n\r\n      {isTimelineMode && (\r\n        <Suspense fallback={<div />}>\r\n          <Timeline\r\n            {...{date, setDate, dates, isTimelineMode, setIsTimelineMode}}\r\n          />\r\n        </Suspense>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ActionsPanel;\r\n","import ActionsPanel from './ActionsPanel';\r\n\r\nimport {API_DOMAIN, API_REFRESH_INTERVAL} from '../constants';\r\nimport {\r\n  fetcher,\r\n  formatDateObjIndia,\r\n  parseIndiaDate,\r\n  retry,\r\n} from '../utils/commonFunctions';\r\n\r\nimport {max} from 'date-fns';\r\nimport equal from 'fast-deep-equal';\r\nimport {memo, useEffect, useMemo, useState, lazy, Suspense} from 'react';\r\nimport {useLocalStorage} from 'react-use';\r\nimport useSWR from 'swr';\r\n\r\nconst Updates = lazy(() => retry(() => import('./Updates')));\r\n\r\nconst Actions = ({date, setDate, dates, lastUpdatedDate}) => {\r\n  const [showUpdates, setShowUpdates] = useState(false);\r\n  const [newUpdate, setNewUpdate] = useLocalStorage('newUpdate', false);\r\n  const [lastViewedLog, setLastViewedLog] = useLocalStorage('lastViewedLog', 0);\r\n  const [isTimelineMode, setIsTimelineMode] = useState(false);\r\n\r\n  const {data: updates} = useSWR(`${API_DOMAIN}/updatelog/log.json`, fetcher, {\r\n    refreshInterval: API_REFRESH_INTERVAL,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (updates !== undefined) {\r\n      const lastTimestamp = updates.slice().reverse()[0].timestamp * 1000;\r\n      if (lastTimestamp !== lastViewedLog) {\r\n        setNewUpdate(true);\r\n        setLastViewedLog(lastTimestamp);\r\n      }\r\n    }\r\n  }, [lastViewedLog, updates, setLastViewedLog, setNewUpdate]);\r\n\r\n  const maxLastUpdatedDate = useMemo(() => {\r\n    return formatDateObjIndia(\r\n      max(\r\n        [lastViewedLog, lastUpdatedDate]\r\n          .filter((date) => date)\r\n          .map((date) => parseIndiaDate(date))\r\n      )\r\n    );\r\n  }, [lastViewedLog, lastUpdatedDate]);\r\n\r\n  return (\r\n    <>\r\n      <ActionsPanel\r\n        {...{\r\n          lastUpdatedDate: maxLastUpdatedDate,\r\n          newUpdate,\r\n          isTimelineMode,\r\n          setIsTimelineMode,\r\n          showUpdates,\r\n          date,\r\n          setDate,\r\n          dates,\r\n          setNewUpdate,\r\n          setShowUpdates,\r\n        }}\r\n      />\r\n\r\n      {showUpdates && (\r\n        <Suspense fallback={<div />}>\r\n          <Updates {...{updates}} />\r\n        </Suspense>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!equal(currProps.date, prevProps.date)) {\r\n    return false;\r\n  } else if (!equal(currProps.lastUpdatedDate, prevProps.lastUpdatedDate)) {\r\n    return false;\r\n  } else if (!equal(currProps.dates, prevProps.dates)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport default memo(Actions, isEqual);\r\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n"],"sourceRoot":""}