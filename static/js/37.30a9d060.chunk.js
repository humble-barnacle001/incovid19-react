(this.webpackJsonpincovid19=this.webpackJsonpincovid19||[]).push([[37],{115:function(t,e,n){"use strict";var i=n(46),a=n(2),c={root:null,rootMargin:"0px 0px 0px 0px",threshold:0};e.a=function(t){var e=Object(a.useState)(!1),n=Object(i.a)(e,2),l=n[0],s=n[1];return Object(a.useEffect)((function(){t.current&&new IntersectionObserver((function(e,n){e.forEach((function(e){e.isIntersecting&&(s(!0),n.unobserve(t.current))}))}),c).observe(t.current)}),[t]),l}},252:function(t,e,n){"use strict";n.r(e);var i=n(100),a=n(46),c=n(11),l=n(115),s=n(24),r=n(97),o=n(94),d=n.n(o),u=n(67),v=n(250),j=n(2),b=n(116),O=n(293),f=n(5),h=n(249),p=n(130),m=n(19),x=Object(j.lazy)((function(){return Object(s.l)((function(){return Promise.all([n.e(1),n.e(19)]).then(n.bind(null,212))}))})),g=Object(j.lazy)((function(){return Object(s.l)((function(){return n.e(8).then(n.bind(null,112))}))})),y=Object(j.lazy)((function(){return Object(s.l)((function(){return n.e(34).then(n.bind(null,159))}))})),N=Object(j.lazy)((function(){return Object(s.l)((function(){return n.e(40).then(n.bind(null,160))}))})),k=Object(j.lazy)((function(){return Object(s.l)((function(){return Promise.all([n.e(2),n.e(7),n.e(5)]).then(n.bind(null,229))}))})),w=Object(j.lazy)((function(){return Object(s.l)((function(){return n.e(35).then(n.bind(null,161))}))})),C=Object(j.lazy)((function(){return Object(s.l)((function(){return Promise.all([n.e(1),n.e(4),n.e(26)]).then(n.bind(null,162))}))})),D=Object(j.lazy)((function(){return Object(s.l)((function(){return n.e(9).then(n.bind(null,231))}))})),V=Object(j.lazy)((function(){return Object(s.l)((function(){return Promise.all([n.e(2),n.e(38)]).then(n.bind(null,230))}))})),M=Object(j.lazy)((function(){return Object(s.l)((function(){return n.e(24).then(n.bind(null,177))}))}));function S(){var t,e,n,o,S,z=Object(O.a)().t,H=Object(f.i)().stateCode.toUpperCase(),I=Object(h.a)("mapStatistic","active"),R=Object(a.a)(I,2),E=R[0],F=R[1],U=Object(j.useState)(!1),P=Object(a.a)(U,2),A=P[0],B=P[1],T=Object(j.useState)({stateCode:H,districtName:null}),J=Object(a.a)(T,2),L=J[0],W=J[1],X=Object(j.useState)(!1),Y=Object(a.a)(X,2),q=Y[0],G=Y[1],K=Object(p.a)("".concat(c.e,"/timeseries-").concat(H,".min.json"),s.b,{revalidateOnMount:!0,refreshInterval:1e5}),Q=K.data,Z=K.error,$=Object(p.a)("".concat(c.e,"/data.min.json"),s.b,{revalidateOnMount:!0,refreshInterval:1e5}).data,_=null===$||void 0===$?void 0:$[H],tt=function(t){var e;console.log(t);var n=60,i=35,a=35,c=50;console.log("json",t);var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";console.log("lastUpdate",t);var n=new Date(t),i=n.toLocaleString("default",{month:"long"}),a=n.getDate();return"".concat(a<10?"0".concat(a):"".concat(a)).concat(e).concat(i)}(null===(e=t[0])||void 0===e?void 0:e.Date);d3.selectAll("#scatterplot-stats").selectAll("svg").remove(),d3.selectAll("#scatterplot-stats").selectAll("#date").remove(),d3.select("#scatterplot-stats").append("div").attr("id","date").attr("class","graphtext").html("".concat(l));var s=d3.select("#scatterplot-stats").append("svg").attr("viewBox","0 0 ".concat(600," ").concat(300)),r=600-i-c-3,o=300-n-a,d=d3.scale.linear().range([o,0]),u=d3.scale.linear().range([0,r]),v=d3.svg.axis().scale(u).ticks(6).tickFormat((function(t){var e=d3.formatPrefix(t);return e.scale(t)+e.symbol})).orient("bottom"),j=d3.svg.axis().scale(d).orient("right").ticks(6).tickFormat((function(t){var e=d3.formatPrefix(t);return e.scale(t)+e.symbol}));s.append("rect").attr("width",r+i+c).attr("height",o+n+a).attr("x",0).attr("y",0).attr("fill","#E3E2F3").attr("rx",4).attr("fill-opacity",1),s=s.append("g").attr("transform","translate("+i+","+n+")");var b=d3.select("#scatterplot-stats").append("div").attr("class","tooltip");var O=t;if(!O)throw new Error("d3.json error");u.domain([0,100]),d.domain([0,100]),s.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(v).append("text").attr("fill","red").attr("transform","translate("+r+",-30)").attr("dy","5.5em").attr("text-anchor","end").text("Vaccine Dose 1 %"),s.append("g").attr("class","y axis").attr("transform","translate("+r+", 0)").call(j).append("text").attr("transform","rotate(0)").attr("dy","-0.8em").attr("text-anchor","end").text("Vaccine Dose 2 %"),s.selectAll(".cyclist").data(O).enter().append("g").attr("class","cyclist").attr("x",(function(t){return u(t.Vaccine1)})).attr("y",(function(t){return d(t.Vaccine2)})).append("circle").attr("cx",(function(t){return u(t.Vaccine1)})).attr("cy",(function(t){return d(t.Vaccine2)})).attr("r",5).attr("fill",(function(t){var e=function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}();return t.color=e,e})).on("mouseover",(function(t,e){console.log("tooltip",t),b.style({display:"block",height:"80px",width:"200px",padding:"5px",opacity:1,"background-color":t.color});var n=parseInt(b.style("width")),i=parseInt(b.style("height"));b.style({top:d3.event.pageY-i-5+"px",left:d3.event.pageX-n+100+"px"}).html("<span><b>"+t.Name+"<br/>Vaccine Dose 1: "+t.Vaccine1+"% <br/>Vaccine Dose 2: "+t.Vaccine2+"%<br/>Total Vaccinations: "+(t.count1+t.count2))})).on("mouseout",(function(t,e){console.log("tooltip",t),b.style({display:"none"})}))};Object(j.useEffect)((function(){if(L.stateCode!==H&&(W({stateCode:H,districtName:null}),B(!1)),console.log("json",$),null===$||void 0===$?void 0:$[H]){console.log("state",$[H].districts);var t=[];Object.keys($[H].districts).forEach((function(e){var n,i,a,c,l,s,r,o,d;if((null===(n=$[H].districts)||void 0===n||null===(i=n[e])||void 0===i||null===(a=i.total)||void 0===a?void 0:a.vaccinated1)&&(null===(c=$[H].districts)||void 0===c||null===(l=c[e])||void 0===l||null===(s=l.total)||void 0===s?void 0:s.vaccinated2)&&(null===(r=$[H].districts)||void 0===r||null===(o=r[e])||void 0===o||null===(d=o.meta)||void 0===d?void 0:d.population)){var u,v,j,b,O,f,h,p,m,x,g,y,N,k,w,C,D,V,M,S,z,I,R,E=((null===(u=$[H].districts)||void 0===u||null===(v=u[e])||void 0===v||null===(j=v.total)||void 0===j?void 0:j.vaccinated1)/(null===(b=$[H].districts)||void 0===b||null===(O=b[e])||void 0===O||null===(f=O.meta)||void 0===f?void 0:f.population)*100).toFixed(2),F=((null===(h=$[H].districts)||void 0===h||null===(p=h[e])||void 0===p||null===(m=p.total)||void 0===m?void 0:m.vaccinated2)/(null===(x=$[H].districts)||void 0===x||null===(g=x[e])||void 0===g||null===(y=g.meta)||void 0===y?void 0:y.population)*100).toFixed(2);if(E>100&&(E=100),F>100&&(F=100),E&&F&&E<=100&&F<=100)t.push({Vaccine1:null!==(N=E)&&void 0!==N?N:0,Vaccine2:null!==(k=F)&&void 0!==k?k:0,count1:null===(w=$[H].districts)||void 0===w||null===(C=w[e])||void 0===C||null===(D=C.total)||void 0===D?void 0:D.vaccinated1,count2:null===(V=$[H].districts)||void 0===V||null===(M=V[e])||void 0===M||null===(S=M.total)||void 0===S?void 0:S.vaccinated2,Name:e,Date:null!==(z=null===(I=$[H])||void 0===I||null===(R=I.meta)||void 0===R?void 0:R.date)&&void 0!==z?z:""})}})),tt(t)}}),[L.stateCode,H,_,$]);var et=Object(j.useMemo)((function(){if(_){var t=window.innerWidth>=540?3:2,e=(null===_||void 0===_?void 0:_.districts)?Object.keys(_.districts).filter((function(t){return"Unknown"!==t})).length:0;return Math.ceil(e/t)}}),[_]),nt=Object(j.useRef)(),it=Object(l.a)(nt),at=Object(j.useMemo)((function(){var t=[];return[0,0,0,0].map((function(e,n){return t.push({animationDelay:"".concat(250*n,"ms")}),null})),t}),[]),ct=A?window.innerWidth>=540?10:8:6,lt=Object(j.useMemo)((function(){var t,e,n,i,a,c=[null===_||void 0===_||null===(t=_.meta)||void 0===t?void 0:t.date,null===_||void 0===_||null===(e=_.meta)||void 0===e||null===(n=e.tested)||void 0===n?void 0:n.date,null===_||void 0===_||null===(i=_.meta)||void 0===i||null===(a=i.vaccinated)||void 0===a?void 0:a.date].filter((function(t){return t}));return c.length>0?Object(u.a)(Object(v.a)(c.map((function(t){return Object(s.k)(t)}))),{representation:"date"}):null}),[_]),st=c.p.includes(E)?E:"confirmed",rt=Object(j.useMemo)((function(){var t;return!!((null===_||void 0===_?void 0:_.districts)&&(null===(t=_.districts)||void 0===t?void 0:t[c.H])&&c.u.every((function(t){return Object(s.i)(_,"total",t)===Object(s.i)(_.districts[c.H],"total",t)})))}),[_]),ot=c.z[st],dt=(null===L||void 0===L?void 0:L.districtName)&&L.districtName!==c.H&&rt,ut=Object.keys((!rt||!ot.hasPrimary)&&(null===_||void 0===_?void 0:_.districts)||{});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(b.a,{children:[Object(m.jsxs)("title",{children:["Coronavirus Outbreak in ",c.y[H]," - incovid19.org"]}),Object(m.jsx)("meta",{name:"title",content:"Coronavirus Outbreak in ".concat(c.y[H],": Latest Map and Case Count")})]}),Object(m.jsxs)("div",{className:"State",children:[Object(m.jsxs)("div",{className:"state-left",children:[Object(m.jsx)(D,{data:_,stateCode:H}),Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)(w,{mapStatistic:E,setMapStatistic:F}),Object(m.jsx)(y,{data:_}),Object(m.jsx)(C,{timeseries:null===Q||void 0===Q||null===(t=Q[H])||void 0===t?void 0:t.dates,stateCode:H,forceRender:!!Z})]}),(null===_||void 0===_||null===(e=_.total)||void 0===e?void 0:e.vaccinated1)&&Object(m.jsx)(N,{data:_}),$&&Object(m.jsx)(j.Suspense,{fallback:Object(m.jsx)("div",{style:{minHeight:"50rem"}}),children:Object(m.jsx)(k,{stateCode:H,data:$,regionHighlighted:L,setRegionHighlighted:W,mapStatistic:E,setMapStatistic:F,lastDataDate:lt,delta7Mode:q,setDelta7Mode:G,noRegionHighlightedDistrictData:dt,noDistrictData:rt})}),Object(m.jsx)("span",{ref:nt}),it&&$&&Object(m.jsx)(j.Suspense,{fallback:Object(m.jsx)("div",{}),children:Object(m.jsx)(V,{stateCode:H,data:$,timeseries:null===Q||void 0===Q||null===(n=Q[H])||void 0===n?void 0:n.dates})})]}),Object(m.jsx)("div",{className:"state-right",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"district-bar",children:[Object(m.jsxs)("div",{className:d()("district-bar-top",{expanded:A}),children:[Object(m.jsxs)("div",{className:"district-bar-left",children:[Object(m.jsx)("h2",{className:d()(st,"fadeInUp"),style:at[0],children:z("Top districts")}),Object(m.jsx)("div",{className:"districts fadeInUp ".concat(A?"is-grid":""),style:A?Object(i.a)({gridTemplateRows:"repeat(".concat(et,", 2rem)")},at[1]):at[1],children:ut.filter((function(t){return"Unknown"!==t})).sort((function(t,e){return function(t,e){var n=_.districts[t],i=_.districts[e];return Object(s.i)(i,"total",E)-Object(s.i)(n,"total",E)}(t,e)})).slice(0,A?void 0:5).map((function(t){var e=Object(s.i)(_.districts[t],"total",st),n=Object(s.i)(_.districts[t],"delta",st);return Object(m.jsxs)("div",{className:"district",children:[Object(m.jsx)("h2",{children:Object(s.f)(e)}),Object(m.jsx)("h5",{children:z(t)}),"active"!==st&&Object(m.jsx)("div",{className:"delta",children:Object(m.jsx)("h6",{className:st,children:n>0?"\u2191"+Object(s.f)(n):""})})]},t)}))})]}),Object(m.jsxs)("div",{className:"district-bar-right fadeInUp",style:at[2],children:[Q&&("confirmed"===st||"deceased"===st)&&Object(m.jsx)("div",{className:"happy-sign",children:Object.keys((null===(o=Q[H])||void 0===o?void 0:o.dates)||{}).slice(-ct).every((function(t){return 0===Object(s.i)(Q[H].dates[t],"delta",st)}))&&Object(m.jsxs)("div",{className:"alert ".concat("confirmed"===st?"is-green":""),children:[Object(m.jsx)(r.v,{}),Object(m.jsxs)("div",{className:"alert-right",children:["No new ",st," cases in the past five days"]})]})}),Object(m.jsx)(x,{timeseries:null===Q||void 0===Q||null===(S=Q[H])||void 0===S?void 0:S.dates,statistic:st,stateCode:H,lookback:ct,forceRender:!!Z})]})]}),Object(m.jsx)("div",{className:"district-bar-bottom",children:ut.length>5?Object(m.jsx)("button",{className:"button fadeInUp",onClick:function(){B(!A)},style:at[3],children:Object(m.jsx)("span",{children:z(A?"View less":"View all")})}):Object(m.jsx)("div",{style:{height:"3.75rem",flexBasis:"15%"}})})]}),Object(m.jsxs)(j.Suspense,{fallback:Object(m.jsx)("div",{}),children:[Object(m.jsx)(M,{stateCode:H,timeseries:Q,regionHighlighted:L,setRegionHighlighted:W,noRegionHighlightedDistrictData:dt,forceRender:!!Z}),Object(m.jsx)("div",{id:"scatterplot-stats",children:Object(m.jsx)("h1",{lassName:"text-center ",children:z("Vaccination Coverage")})})]})]})})]}),Object(m.jsx)("div",{}),Object(m.jsx)(g,{})]})}e.default=Object(j.memo)(S)}}]);
//# sourceMappingURL=37.30a9d060.chunk.js.map